var domain="https://api.socialgoodsoftware.com";(location.origin.indexOf("sgs.com")>-1||location.origin.indexOf(":3000")>-1||location.origin.indexOf("file://")>-1)&&(domain="http://api.sgs.com:2999");var AjaxQueue={},TemplateDynamicCode="";function StartTemplateValidation(){function InitApplication(){var e;(e=jQuery)(document).ready(function(){StartApp(e)})}function StartApp(e){0===e(".spinner").length&&e(e(".MS_contentWrapper_inner")).parent().append('<div class="spinner" style="padding: 30px;margin-top: 80px;margin-bottom:  80px;display:none;"><img src="https://cdn.socialgoodsoftware.com/_default/images/loading.gif" style="display: block;margin-left: auto;margin-right: auto;width: 120px;"><p style="text-align: center;margin-top: 10px;">Loading please wait...</p></div>');var t=e("#custom-template").attr("src").split("?auth=")[1];e.ajax({type:"POST",headers:{"x-public-key":"434c4043e3c045cc8426e83f14709fca"},url:domain+"/api/template",data:{auth:t}}).then(function(t){var a,n="",i="",o=GetPage(e);"checkout-page"===o&&(n=t["checkout-page-js"],TemplateDynamicCode=t["checkout-page-dynamic-js"],i=t["checkout-page-css"]),"cart-page"===o&&(n=t["cart-page-js"],TemplateDynamicCode=t["cart-page-dynamic-js"],i=t["cart-page-css"]),"confirmation-page"===o&&(n=t["confirmation-page-js"],i=t["confirmation-page-css"]),ExecuteTemplateCode(n),e("head").append("<style>"+decodeURIComponent(i)+"</style>"),a=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(e,t,n,i,o){AjaxQueue[t]=t,this.addEventListener("error",function(){delete AjaxQueue[t],setTimeout(function(){EmptyQueue(AjaxQueue)&&(ExecuteTemplateCode(TemplateDynamicCode),"ExecuteDynamicCheckoutFlows"in window&&window.ExecuteDynamicCheckoutFlows())},200)},!1),this.addEventListener("load",function(){delete AjaxQueue[t],setTimeout(function(){EmptyQueue(AjaxQueue)&&(ExecuteTemplateCode(TemplateDynamicCode),"ExecuteDynamicCheckoutFlows"in window&&window.ExecuteDynamicCheckoutFlows())},200)},!1),a.call(this,e,t,n,i,o)}})}function LoadScript(e,t){var a,n,i;n=!1,(a=document.createElement("script")).type="text/javascript",a.src=e,a.onload=a.onreadystatechange=function(){n||this.readyState&&"complete"!=this.readyState||(n=!0,t())},(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,i)}function ExecuteTemplateCode(code){if(code)try{code=decodeURIComponent(code),eval(code)}catch(e){console.log("ERROR! - Invalid Code.")}}function GetPage(e){var t=e('[id*="panelDailyAdmission"]'),a=e('[id*="MembershipExpress"]'),n=e('[id*="panelEvent"]'),i=e('[id*="EventRegistrationExpress"]'),o=e('[id*="UpdatePanel"]'),c=e('[id*="PackageRegistrationExpress"]'),r=e('[id*="divComboPriceList"]'),p=e('[id*="panelCombination"]');if(t.length>0)return"checkout-page";if(a.length>0)return"checkout-page";if(n.length>0)return"checkout-page";if(i.length>0)return"checkout-page";if(o.length>0)return"checkout-page";if(c.length>0)return"checkout-page";if(r.length>0)return"checkout-page";if(p.length>0)return"checkout-page";var d=e('[id*="UserRegistration"]'),u=e('[id*="txtForgotPWDUserNameEmail"]');if(d.length>0)return"checkout-page";if(u.length>0)return"checkout-page";var s=e('[id*="CartGrid_CartContainer"]'),l=e('[id*="PaymentPartFormContainer"]');if(s.length>0||l.length>0){var g=window.location.href;return g.indexOf("tab=3")>-1&&g.indexOf("pid=")>-1&&g.indexOf("csid=")>-1?"confirmation-page":"cart-page"}}function EmptyQueue(e){var t=0;return $.each(e,function(e,a){t++}),0===t}"undefined"==typeof jQuery?LoadScript("https://code.jquery.com/jquery-3.4.1.js",function(){InitApplication()}):InitApplication()}window.addEventListener("load",StartTemplateValidation,!0);